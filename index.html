\<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Undangan Karo</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <style>
  * {margin: 0; padding: 0; box-sizing: border-box;}
  body {
    font-family: 'Open Sans', sans-serif;
    background: #fffaf1;
    overflow-x: hidden;
  }
  .envelope-screen {
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: #f9f0dd;
    display: flex; align-items: center; justify-content: center;
    z-index: 9999; transition: opacity 0.8s ease;
  }
  .envelope-screen.hide { opacity: 0; pointer-events: none; }
  .envelope {
    width: 90%; max-width: 340px;
    aspect-ratio: 16/10;
    background: gold; border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    color: white; font-family: 'Dancing Script', cursive;
    font-size: 2rem; cursor: pointer;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    position: relative; animation: fadeIn 1s ease-in-out;
    text-align: center; padding: 10px;
  }
  .envelope::before {
    content: ''; position: absolute; top: -20%; left: 0;
    border-left: 50% solid transparent;
    border-right: 50% solid transparent;
    border-bottom: 20% solid gold;
  }
  .container {
    display: none; flex-direction: column;
    min-height: 100vh; max-width: 480px; margin: auto;
  }
  .left, .right { width: 100%; padding: 20px; }
  .left {
    background: linear-gradient(to bottom right, #fff8dc, #f3e5ab);
    display: flex; flex-direction: column; align-items: center;
  }
  h1 {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.8rem, 6vw, 2.5rem);
    color: #a67c00; margin-bottom: 10px; text-align: center;
  }
  h2 {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.4rem, 5vw, 1.8rem);
    color: #a86700; text-align: center; margin-top: 20px;
  }
  p { font-size: clamp(0.9rem, 4vw, 1rem); margin: 6px 0; text-align: center; }
  select, input, button, textarea {
    margin: 5px 0; padding: 12px;
    font-size: clamp(0.9rem, 4vw, 1rem);
    border-radius: 6px; border: 1px solid #ccc;
    width: 90%; max-width: 300px; font-family: inherit;
  }
  button { min-height: 44px; cursor: pointer; }
  .right {
    background: #f8f0db; display: flex; justify-content: center;
  }
  .gallery {
    position: relative; width: 100%; aspect-ratio: 3/4;
    background: #f8f0db; overflow: hidden;
  }
  .gallery img {
    width: 100%; height: 100%; object-fit: cover;
    position: absolute; opacity: 0; transition: opacity 1s;
    border-radius: 10px;
  }
  .gallery img.active { opacity: 1; z-index: 1; }
  #pesan-konfirmasi {
    margin-top: 15px; color: green; font-weight: bold;
    text-align: center; display: none;
  }
  canvas#confetti-canvas {
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh; pointer-events: none; z-index: 1000;
  }
  </style>
</head>
<body>
<div class="envelope-screen" id="envelope">
  <div class="envelope" onclick="bukaUndangan()">üíå Buka Undangan</div>
</div>

<canvas id="confetti-canvas"></canvas>

<div class="container" id="konten">
  <div class="left">
    <h1>üéâ Ulang Tahun ke-75 Karo üéÇ</h1>
    <p><strong>Dengan sukacita kami mengundang Saudara ke acara ulang tahun Karo</strong></p>
    <p><strong>üìÖ 5 September 2025, pukul 17:00 WIB</strong></p>
    <p><strong>üìç Jl. Tani Baru 1, Medan</strong></p>

    <h2>Konfirmasi Kehadiran</h2>
    <form id="rsvp-form">
      <select id="kehadiran" required>
        <option value="">Pilih Kehadiran</option>
        <option value="ya">Ya, saya akan hadir</option>
        <option value="tidak">Maaf, saya tidak bisa hadir</option>
      </select>
      <input type="text" id="nama" placeholder="Nama Anda" required style="display:none" />
      <textarea id="doa" placeholder="Doa & Harapan untuk yang berulang tahun" style="display:none"></textarea>
      <button type="submit" id="submit-btn">Kirim</button>
    </form>

    <div id="lucky-draw" style="display:none;">
      <p id="soal"></p>
      <input type="text" id="jawaban" placeholder="Jawaban Anda"/>
      <button id="submit-jawaban">Jawab</button>
    </div>

    <p id="pesan-konfirmasi"></p>

    <!-- Tombol Maps dipindah ke sini -->
    <a href="https://www.google.com/maps?q=Jl.+Tani+Baru+1,+Medan" target="_blank">
      <button style="background:#4285F4; color:#fff; margin-top:15px;">üìç Buka di Google Maps</button>
    </a>

    <audio id="bg-music" src="Happy.mp3" autoplay loop></audio>
  </div>

  <div class="right">
    <div class="gallery">
      <img src="Foto1.jpg" class="active"/>
      <img src="Foto2.jpg" />
      <img src="Foto3.jpg" />
      <img src="Foto4.jpg" />
      <img src="Foto5.jpg" />
      <img src="Foto6.jpg" />
    </div>
  </div>
</div>

<script>
function bukaUndangan() {
  document.getElementById('envelope').classList.add('hide');
  setTimeout(() => {
    document.getElementById('envelope').style.display = 'none';
    document.getElementById('konten').style.display = 'flex';
    startConfetti();
    document.getElementById("bg-music").play();
  }, 800);
}

// === RSVP & Lucky Draw ===
const soalList = [
  { soal: "Tanggal berapa Ulang Tahun Karo?", jawaban: ["7 agustus"] },
  { soal: "Cucu karo paling muda?", jawaban: ["geraldin", "andin"] },
  { soal: "Ukuran sepatu karo?", jawaban: ["37"] },
  { soal: "Tahun 2022 berapa usia Karo?", jawaban: ["72"] },
  { soal: "Merk handphone karo?", jawaban: ["vivo"] }
];
const kehadiran = document.getElementById("kehadiran");
const namaInput = document.getElementById("nama");
const doaInput = document.getElementById("doa");
const form = document.getElementById("rsvp-form");
const luckyDiv = document.getElementById("lucky-draw");
const soalEl = document.getElementById("soal");
const inputJawaban = document.getElementById("jawaban");
const btnJawab = document.getElementById("submit-jawaban");
const pesan = document.getElementById("pesan-konfirmasi");

let soalIndex, namaFinal, kehadiranFinal, hasilLucky;
kehadiran.addEventListener("change", () => {
  const val = kehadiran.value;
  namaInput.style.display = val ? "block" : "none";
  doaInput.style.display = val === "tidak" ? "block" : "none";
});
form.addEventListener("submit", (e) => {
  e.preventDefault();
  namaFinal = namaInput.value.trim();
  kehadiranFinal = kehadiran.value;
  if (kehadiranFinal === "tidak") {
    pesan.innerText = "Terima kasih atas konfirmasinya.";
    pesan.style.display = "block";
  } else if (kehadiranFinal === "ya") {
    const konfirmasi = confirm("Anda punya 1 kesempatan Lucky Draw. Lanjut?");
    if (konfirmasi) {
      soalIndex = Math.floor(Math.random() * soalList.length);
      soalEl.innerText = soalList[soalIndex].soal;
      luckyDiv.style.display = "block";
      form.style.display = "none";
    }
  }
});
btnJawab.addEventListener("click", () => {
  const jawabanUser = inputJawaban.value.trim().toLowerCase();
  const benar = soalList[soalIndex].jawaban.includes(jawabanUser);
  alert(benar ? "üéâ Selamat! Anda dapat hadiah Lucky Draw." : "üòÑ Anda kurang beruntung!");
  luckyDiv.style.display = "none";
  pesan.innerText = `Kami menunggu kehadiran saudara ${namaFinal} di perayaan nanti.`;
  pesan.style.display = "block";
});

// === Confetti & Galeri ===
function startConfetti() {
  const canvas = document.getElementById("confetti-canvas");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const pieces = [];
  const colors = ["#f00","#0f0","#00f","#ff0","#f0f","#0ff"];
  for (let i=0;i<150;i++){
    pieces.push({
      x: Math.random()*canvas.width,
      y: Math.random()*-canvas.height,
      size: Math.random()*6+4,
      color: colors[Math.floor(Math.random()*colors.length)],
      speed: Math.random()*3+2,
      angle: Math.random()*360,
      rotateSpeed: Math.random()*10
    });
  }
  const images = document.querySelectorAll('.gallery img');
  let current=0;
  if(images.length>1){
    setInterval(()=>{
      images[current].classList.remove('active');
      current=(current+1)%images.length;
      images[current].classList.add('active');
    },3000);
  }
  function update(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    for(let p of pieces){
      p.y+=p.speed; p.angle+=p.rotateSpeed;
      if(p.y>canvas.height) p.y=-p.size;
      ctx.fillStyle=p.color;
      ctx.save(); ctx.translate(p.x,p.y); ctx.rotate((p.angle*Math.PI)/180);
      ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size);
      ctx.restore();
    }
    requestAnimationFrame(update);
  }
  update();
}
</script>
</body>
</html>
